require 'spec_helper'

describe Question do
  describe ".argument" do
    context "integration" do
      let(:user) {FactoryGirl.create(:user)}
      let(:question) {FactoryGirl.create(:question)}
      let(:context_node) {Node::UserNode.create(:user=>user, :question=>question, :title => 'Title', :is_conclusion => true)}
      let(:context_node2) {Node::UserNode.create(:user=>user, :question=>question, :title => 'Title2', :is_conclusion => true)}
      let(:context_node3) {Node::UserNode.create(:user=>user, :question=>question, :title => 'Title3', :is_conclusion => false)}
      before do
        @link1 = Link::UserLink::PositiveUserLink.create(:user=>user, :question => question, :global_node_to_id => context_node.global_node_id, :global_node_from_id => context_node2.global_node_id)
        @link2 = Link::UserLink::PositiveUserLink.create(:user=>user, :question => question, :global_node_to_id => context_node.global_node_id, :global_node_from_id => context_node3.global_node_id)
      end
      context "when set up" do
        let(:argument) {
          [
            {
              for: [
                {
                  for: [],
                  against: [],
                }.merge(context_node2.attributes),
                {
                  for: [],
                  against: [],
                }.merge(context_node3.attributes),
              ],
              against: [],
            }
          ]
        }

      end
    end
  end

end
